---
output: pdf_document
fontsize: 11pt
geometry: margin=1in
---

```{r , results='hide', include=FALSE, warning=FALSE}
source(file = "preprocess_data.R")
```

```{r, include = FALSE }
knitr::opts_chunk$set( echo=FALSE, # hide code from document
                       warning=FALSE, # hide warnings 
                       message=FALSE) # hide messages 
library(tidyverse)
```

# STAA57 W21 Draft Report 

Group ? (member names)    

Link to RStudio Cloud shared project: https://rstudio.cloud/

***

## Introduction 

(*Description of questions that are being investigated*)

1. What are the trends in jet fuel costs over different time units (months/season)?
  - For this question we use the web scrapped to see how fuel price changes during time and we try to see how these changes affect the cost of flight or session for the company

2. What factors affect cost in a significant matter (model 1)
  - we decide here to use a linear regression model to assess significant facotrs to how cost is affected
  
3. What factors affect the duration of the same sets of exercises (model 2)
  - we decide here to use a linear regression model to assess significant facotrs to how duration of session is affected

4. What are the trends in demand over different time units (months/season/year)? 
 - we find how the demand in flight training changes and was season is more significant 

5. Considering the previous questions, what are the estimated average aircraft operating over different time units (months/season)?  

6. What are the total aircraft operating costs over month/season/year?  
  - assuming we know total number of planes
### Data 

(*Description of data used to answer the questions*)
For external data sources that we used in this project decided to gather from the following sources:

  - Fuel data: (https://www.indexmundi.com/commodities/?commodity=jet-fuel&months=240&currency=cad)
      - Historical fuel data by month, including the cost/gallon and %change
      - Assuming that all planes used in the flight school use the same fuel
  
  - Operating costs and repairs (https://cessna150152club.org/Costs):
      - The annual operating cost of a cessna plane model.
      - We made an assumption that there is a 10 dollar static cost added to each training session when a plane is used which we got from the source website
	
	- Weather (https://climate.weather.gc.ca/historical_data/search_historic_data_e.html):
		- Historical weather data by day, including temp, precipitation, wind, etc.
		- Gathered data from Oshawa location




## Analysis 


(*Main body of analysis, containing data summaries, visualizations, hypothesis tests, or modeling*)

```{r}
fuel_by_month <- cleaned_fuel_prices %>%
  group_by(Month) %>%
  summarise(Avg_Price_Per_Gallon = mean(Price)) %>%
  ggplot(aes(x=Month, y=Avg_Price_Per_Gallon)) +
  geom_bar(stat="identity", fill="darkblue") +
  coord_cartesian(ylim=c(1.9, 2.2)) + 
  ylab("Avg Price Per Gallon") +
  labs(title="Fuel Price By Month ('16-'20)")

fuel_by_season <- cleaned_fuel_prices %>%
  group_by(Season) %>%
  summarise(Avg_Price_Per_Gallon = mean(Price)) %>%
  ggplot(aes(x=Season, y=Avg_Price_Per_Gallon)) +
  geom_bar(stat="identity", fill="darkblue") +
  coord_cartesian(ylim=c(1.9, 2.2)) + 
  ylab("Avg Price Per Gallon") +
  labs(title="Fuel Price By Season ('16-'20)")

ggarrange(fuel_by_month, fuel_by_season)
```
From the monthly data on the left, we can see that in March and April the fuel price is significantly cheaper than any other month at a price around \$1.91/gallon. Following that, it steadily increases and peaks around \$2.15/gallon around October and December.

For the seasonal data on the right, we can see that spring is significantly cheaper than any other season with a price at around \$1.94/gallon. On the other hand, fuel price is most expensive in the fall season with a price of about \$2.13/gallon

```{r, echo = FALSE, warning=FALSE, message=FALSE, fig.height=2}
clean_data_processed %>%
  distinct(Year, Month, Day, .keep_all = T) %>%
  mutate_if(is.numeric, replace_na, 0) %>%
  ggplot(aes(x=Date, y=`Fuel Price Per Gallon`)) + 
  geom_line(position="dodge", stat="identity", color="darkblue") +
  xlab('Time') + ylab('Fuel Price Per Gallon') +
  scale_x_date(breaks = 'year') +
  labs(title='Fuel Price Per Gallon Time Series')
```
From the above graph, it can be seen there was a significant decrease in the jet fuel price per gallon, leading to lower aircraft operating costs. Therefore, we expect that the average and total estimated aircraft costs to be lower in 2020.

### Some Sub-Section Title


(*Graphs should be created in R, not imported from file*)


```{r,  fig.width = 4, fig.height = 4, fig.cap= "Graph Caption" } 
tibble( t = seq(0, 2*pi, by=0.1) ) %>% 
  mutate( x = 16*sin(t)^3, 
          y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t) ) %>% 
  ggplot( aes( x = x, y = y) ) + 
  geom_polygon( fill = "pink" ) +
  # annotate axes 
  xlab( "abscissa" ) + 
  ylab( "ordinate" ) + 
  ggtitle( "Graph Title (optional)"  ) +
  coord_fixed() 
```

### Some Sub-section Title     


(*R output tables can be formatted nicely in .html with* `knitr::kable()`) 

```{r, echo = FALSE}
tibble( X = c("this", "my"), 
        Y = c("is", "table") ) %>% 
  knitr::kable( caption = "Table Caption")
```



## Summary 

(*Recap of your findings and conclusions*)


***  

## Appendix 

(*Everything here does not count towards page limit*)


